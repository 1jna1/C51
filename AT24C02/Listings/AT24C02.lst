C51 COMPILER V9.54   AT24C02                                                               10/23/2025 15:09:43 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE AT24C02
OBJECT MODULE PLACED IN .\Objects\AT24C02.obj
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE AT24C02.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\AT2
                    -4C02.lst) OBJECT(.\Objects\AT24C02.obj)

line level    source

   1          /**
   2           ****************************************************************************************************
   3           * @file        main.c
   4           * @author      jna
   5           * @date        2025-09-26
   6           * @brief       AT24C02数据存储-读写数据
   7           * @email       2944309620@qq.com
   8           ****************************************************************************************************
   9           * @attention
  10           *
  11           * 实验平台:STC89C52开发板
  12           *
  13           ****************************************************************************************************
  14           */
  15           
  16          #include <REGX52.H>
  17          #include "I2C.h"
  18          #include "Delay.h"
  19          
  20          #define AT24C02_ADDRESS  0xA0   //器件地址(手册中有,每个型号器件地址要求不一样)
  21          
  22          void Delay(unsigned int xms);
  23          
  24          /*  
  25            * @brief  按页写数据
  26            * @param  Reg_Address 页地址 *Data 要写的数据的地址
  27            * @retval 无
  28          */
  29          void AT24C02_PageWriteData(unsigned char Reg_Address,unsigned char *Data)  //按页写数据
  30          {
  31   1              unsigned char i;
  32   1              I2C_Start();
  33   1              I2C_SendByte(AT24C02_ADDRESS);
  34   1              I2C_ReceiveAck();
  35   1              I2C_SendByte(Reg_Address);
  36   1              I2C_ReceiveAck();
  37   1              for(i=0;i<8;i++)
  38   1              {
  39   2                      I2C_SendByte(Data[i]);
  40   2                      I2C_ReceiveAck();
  41   2              }
  42   1              I2C_Stop();
  43   1              Delay(5);  //这里的Delay根据数据手册要求此时AT24C02进入写周期
  44   1      }
  45          
  46          /*  
  47            * @brief  按字节写数据
  48            * @param  Reg_Address 字地址 Data 要写的数据
  49            * @retval 无
  50          */
  51          void AT24C02_WriteData(unsigned char Reg_Address,unsigned char Data)  //按字节写数据
  52          {
  53   1              I2C_Start();
  54   1              I2C_SendByte(AT24C02_ADDRESS);
C51 COMPILER V9.54   AT24C02                                                               10/23/2025 15:09:43 PAGE 2   

  55   1              I2C_ReceiveAck();
  56   1              I2C_SendByte(Reg_Address);
  57   1              I2C_ReceiveAck();
  58   1              I2C_SendByte(Data);
  59   1              I2C_ReceiveAck();
  60   1              I2C_Stop();
  61   1              Delay(5);  //这里的Delay根据数据手册要求此时AT24C02进入写周期
  62   1      }
  63          
  64          /*  
  65            * @brief  按顺序读字节数据
  66            * @param  Reg_Address 要读的寄存器地址
  67            * @retval Data 读到的数据
  68          */
  69          unsigned char AT24C02_ReadData(unsigned char Reg_Address)  
  70          {
  71   1              unsigned char Data;
  72   1              I2C_Start();
  73   1              I2C_SendByte(AT24C02_ADDRESS);
  74   1              I2C_ReceiveAck();
  75   1              I2C_SendByte(Reg_Address);
  76   1              I2C_ReceiveAck();
  77   1              
  78   1              I2C_Start();
  79   1              I2C_SendByte(AT24C02_ADDRESS|0x01);
  80   1              I2C_ReceiveAck();
  81   1              Data=I2C_ReadByte();
  82   1              I2C_SendAck(1);
  83   1              I2C_Stop();
  84   1              return Data;
  85   1      }
  86          
  87          //也可以一下子读8位数据,后面需要继续进行完善


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    160    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       9
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
