C51 COMPILER V9.54   LCD1602                                                               10/05/2025 10:19:10 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\LCD1602.obj
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE LCD1602.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\LCD
                    -1602.lst) OBJECT(.\Objects\LCD1602.obj)

line level    source

   1          #include <REGX52.H>
   2          #include <INTRINS.H>
   3          #include <math.h>
   4          
   5          #define Data_Port  P0
   6          
   7          sbit LCD_RS=P2^6;
   8          sbit LCD_RW=P2^5;
   9          sbit LCD_E=P2^7;
  10          
  11          void Delay1ms(void)     //@11.0592MHz
  12          {
  13   1              unsigned char data i, j;
  14   1      
  15   1              _nop_();
  16   1              i = 2;
  17   1              j = 199;
  18   1              do
  19   1              {
  20   2                      while (--j);
  21   2              } while (--i);
  22   1      }
  23          
  24          unsigned char LCD_ReadState(void)
  25          {
  26   1              unsigned char State;
  27   1              LCD_RS=0;
  28   1              LCD_RW=1;
  29   1              Delay1ms();
  30   1              LCD_E=1;
  31   1              State=Data_Port;
  32   1              LCD_E=0;
  33   1              Delay1ms();
  34   1              return State;
  35   1      }
  36          
  37          unsigned char LCD_ReadData(void)
  38          {
  39   1              unsigned char Data;
  40   1              LCD_RS=1;
  41   1              LCD_RW=1;
  42   1              Delay1ms();
  43   1              LCD_E=1;
  44   1              Data=Data_Port;
  45   1              LCD_E=0;
  46   1              Delay1ms();
  47   1              return Data;
  48   1      }
  49          
  50          void LCD_WriteCommand(unsigned char Command)
  51          {
  52   1              LCD_RS=0;
  53   1              LCD_RW=0;
  54   1              Delay1ms();
C51 COMPILER V9.54   LCD1602                                                               10/05/2025 10:19:10 PAGE 2   

  55   1              Data_Port=Command;
  56   1              LCD_E=1;
  57   1              Delay1ms();
  58   1              LCD_E=0;
  59   1              Delay1ms();
  60   1      }
  61          
  62          void LCD_WriteData(unsigned char Data)
  63          {
  64   1              LCD_RS=1;
  65   1              LCD_RW=0;
  66   1              Delay1ms();
  67   1              Data_Port=Data;
  68   1              LCD_E=1;
  69   1              Delay1ms();
  70   1              LCD_E=0;
  71   1              Delay1ms();
  72   1      }
  73          
  74          void LCD_Init(void)
  75          {
  76   1              LCD_WriteCommand(0x38);
  77   1              LCD_WriteCommand(0x0C);
  78   1              LCD_WriteCommand(0x06);
  79   1              LCD_WriteCommand(0x01);
  80   1      }
  81          
  82          void LCD_Setcursor(unsigned char line,unsigned char column)
  83          {
  84   1              if(line==1)
  85   1              {
  86   2                      LCD_WriteCommand(0x80+(column-1));
  87   2              }
  88   1              else
  89   1              {
  90   2                      LCD_WriteCommand(0x80+(column-1+0x40));
  91   2              }
  92   1      }
  93          
  94          void LCD_ShowChar(unsigned char line,unsigned char column,unsigned char character)
  95          {
  96   1              LCD_Setcursor(line,column);
  97   1              LCD_WriteData(character);
  98   1      }
  99          
 100          void LCD_ShowString(unsigned char line,unsigned char column,unsigned char *string)
 101          {
 102   1              unsigned char i=0;
 103   1              LCD_Setcursor(line,column);
 104   1              for(i=0;string[i]!='\0';i++)
 105   1              {
 106   2                      LCD_WriteData(string[i]);
 107   2              }
 108   1      }
 109          
 110          void LCD_ShowNum(unsigned char line,unsigned char column,unsigned int number,unsigned char count)
 111          {
 112   1              unsigned char temp,i;
 113   1              LCD_Setcursor(line,column);
 114   1              for(i=count;i>0;i--)
 115   1              {
 116   2                      temp=number/pow(10,i-1);
C51 COMPILER V9.54   LCD1602                                                               10/05/2025 10:19:10 PAGE 3   

 117   2                      LCD_WriteData(temp+0x30);
 118   2                      number-=temp*pow(10,i-1);
 119   2              }
 120   1      }
 121          
 122          void LCD_ShowSignedNum(unsigned char line,unsigned char column,int number,unsigned char count)
 123          {
 124   1              unsigned char temp,i;
 125   1              LCD_Setcursor(line,column);
 126   1              if(number>=0)
 127   1              {
 128   2                      LCD_WriteData('+');
 129   2                      for(i=count;i>0;i--)
 130   2                      {
 131   3                              temp=number/pow(10,i-1);
 132   3                              LCD_WriteData(temp+0x30);
 133   3                              number-=temp*pow(10,i-1);
 134   3                      }
 135   2              }
 136   1              else
 137   1              {
 138   2                      int num=-number;
 139   2                      LCD_WriteData('-');
 140   2                      for(i=count;i>0;i--)
 141   2                      {
 142   3                              temp=num/pow(10,i-1);
 143   3                              LCD_WriteData(temp+0x30);
 144   3                              num-=temp*pow(10,i-1);
 145   3                      }
 146   2              }
 147   1      
 148   1      }
 149          
 150          void LCD_ShowHexNum(unsigned char line,unsigned char column,unsigned int number,unsigned char count)
 151          {
 152   1              unsigned char temp,i,j;
 153   1              LCD_Setcursor(line,column);     
 154   1              for(i=count-1;i>0;i--)
 155   1              {
 156   2                      temp=number/pow(16,i);
 157   2                      if(temp>=10&&temp<=15)
 158   2                      {
 159   3                              LCD_WriteData(temp-10+'A');
 160   3                      }
 161   2                      else if(temp>=0&&temp<10)
 162   2                      {
 163   3                              LCD_WriteData(temp+'0');
 164   3                      }
 165   2                      number-=temp*pow(16,i);
 166   2                      if(number>=10&&number<=15)
 167   2                      {
 168   3                              LCD_WriteData(number-10+'A');
 169   3                      }
 170   2                      else if(number>=0&&number<10)
 171   2                      {
 172   3                              LCD_WriteData(number+'0');
 173   3                      }
 174   2              }
 175   1              if(count==1)
 176   1              {
 177   2                      if(number>=10&&number<=15)
 178   2                      {
C51 COMPILER V9.54   LCD1602                                                               10/05/2025 10:19:10 PAGE 4   

 179   3                              LCD_WriteData(number-10+'A');
 180   3                      }
 181   2                      else if(number>=0&&number<10)
 182   2                      {
 183   3                              LCD_WriteData(number+'0');
 184   3                      }
 185   2              }
 186   1                      
 187   1      }
*** WARNING C280 IN LINE 152 OF LCD1602.c: 'j': unreferenced local variable
 188          
 189          void LCD_ShowBinNum(unsigned char line,unsigned char column,unsigned int number,unsigned char length)
 190          {
 191   1              unsigned char i,temp;
 192   1              LCD_Setcursor(line,column);     
 193   1              for(i=length;i>0;i--)
 194   1              {
 195   2                      temp=number/pow(2,i-1);
 196   2                      LCD_WriteData(temp+'0');
 197   2                  number-=temp*pow(2,i-1);
 198   2              }
 199   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1248    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      34
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
